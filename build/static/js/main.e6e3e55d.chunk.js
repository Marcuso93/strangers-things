(this["webpackJsonpstranger-things"]=this["webpackJsonpstranger-things"]||[]).push([[0],{33:function(e,t,s){},34:function(e,t,s){"use strict";s.r(t);var n=s(1),r=s(20),c=s.n(r),a=s(10),o=s(4),i=s(3),u=s(0),l=function(e){var t,s,n=e.userData;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{className:"profileTitle",children:"Sent Messages"}),null===(t=n.messages)||void 0===t?void 0:t.map((function(e,t){if(e.fromUser._id===n._id)return Object(u.jsxs)("div",{className:"messages",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Sender:"})," ",e.fromUser.username]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Message:"})," ",e.content]})]},t)})),Object(u.jsx)("h2",{className:"profileTitle",children:"Recieved Messages"}),null===(s=n.messages)||void 0===s?void 0:s.map((function(e){if(e.fromUser._id!==n._id)return Object(u.jsxs)("div",{className:"messages",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Sender:"})," ",e.fromUser.username]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Message:"})," ",e.content]})]},e._id)}))]})},j=s(2),b=s(6),p=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,s,n,r){var c,a,o;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={method:s?s.toUpperCase():"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},n&&(c.headers.Authorization="Bearer ".concat(n)),e.next=5,fetch("https://strangers-things.herokuapp.com/api/2204-FTB-MT-WEB-PT"+t,c);case 5:return a=e.sent,e.next=8,a.json();case 8:if(!(o=e.sent).error){e.next=11;break}throw o.error;case 11:return e.abrupt("return",o);case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,s,n,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,s){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/users/register","POST",null,{user:{username:t,password:s}});case 2:return n=e.sent,e.abrupt("return",{user:n.data.message,token:n.data.token});case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,s){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/users/login","POST",null,{user:{username:t,password:s}});case 2:return n=e.sent,e.abrupt("return",{user:n.data.message,token:n.data.token});case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,s,n){var r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/posts/".concat(n,"/messages"),"POST",t,{message:{content:s}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,s,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,s,n,r,c,a){var o;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/posts/","POST",t,{post:{title:s,description:n,price:r,location:c,willDeliver:a}});case 2:return o=e.sent,e.abrupt("return",o.data.post);case 4:case"end":return e.stop()}}),e)})));return function(t,s,n,r,c,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,s){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/posts/".concat(s),"DELETE",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t){var s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/users/me","GET",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t){var s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/posts","GET",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.user,s=e.setUser,r=e.token,c=e.setToken,a=e.setUserData,i=Object(n.useState)(""),l=Object(o.a)(i,2),p=l[0],h=l[1],f=Object(n.useState)(""),m=Object(o.a)(f,2),v=m[0],g=m[1],w=Object(n.useState)(!1),k=Object(o.a)(w,2),N=k[0],S=k[1],y=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t){var n,r,o,i,u,l,b;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!N){e.next=11;break}return e.next=4,d(p,v);case 4:n=e.sent,r=n.user,o=n.token,s(r),c(o),e.next=22;break;case 11:return e.next=13,O(p,v);case 13:return i=e.sent,u=i.user,l=i.token,s(u),c(l),e.next=20,x(l);case 20:b=e.sent,a(b.data);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:t&&r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h1",{className:"welcome",children:[t," Welcome back ",p,"!"]}),Object(u.jsx)("h2",{className:"welcome",children:"Check your Profile for Messages or Posts for what's new today! "}),Object(u.jsx)("button",{className:"logOut",onClick:function(){s(!1),c("")},children:"Log Out"})]}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"home",children:[Object(u.jsx)("h2",{className:"loginTitle",children:N?"Registration":"Log in"}),Object(u.jsxs)("form",{onSubmit:y,children:[Object(u.jsx)("input",{className:"login",onChange:function(e){return h(e.target.value)},name:"username",type:"text",placeholder:"Username",value:p}),Object(u.jsx)("input",{className:"login",onChange:function(e){return g(e.target.value)},name:"password",type:"password",placeholder:"Password",value:v}),Object(u.jsx)("button",{className:"submitBtn",type:"submit",children:"Submit"})]}),Object(u.jsx)("button",{className:"homeBtn",onClick:function(){console.log("toggle",N),S(!N)},children:" Register/Login"})]})})})},w=function(e){var t=e.featuredPost,s=e.setFeaturedPost,r=e.token,c=Object(n.useState)(""),a=Object(o.a)(c,2),l=a[0],p=a[1],d=Object(i.e)(),O=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,s){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),window.confirm("Are you sure")&&m(r,s),d.push("/posts/");case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return Object(u.jsxs)("article",{className:"featured-post",children:[Object(u.jsx)("h2",{children:t.title}),Object(u.jsxs)("div",{className:"postInfo",children:["Description: ",t.description]}),Object(u.jsxs)("div",{className:"postInfo",children:["Price: ",t.price]}),Object(u.jsxs)("div",{className:"postInfo",children:["Seller: ",t.username]}),Object(u.jsxs)("div",{className:"postInfo",children:["Location: ",t.location]}),Object(u.jsxs)("div",{className:"postInfo",children:["Will Deliver: ",t.willDeliver?"yes":"no"]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("h3",{children:"Messages"}),Object(u.jsx)("ul",{children:t.messages.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsxs)("span",{children:[" ",e.content]})},e._id)}))})]}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h(r,l,t._id)},children:[Object(u.jsx)("input",{onChange:function(e){return p(e.target.value)},type:"text",name:"message",placeholder:"message",value:l}),Object(u.jsx)("button",{className:"submit",type:"submit",children:"Submit Message"})]}),t.isAuthor&&Object(u.jsx)("button",{onClick:function(e){O(e,t._id)},children:"Delete Post"}),Object(u.jsx)("button",{className:"close",onClick:function(){s(""),d.push("/posts")},children:"Close"})]})},k=s(22),N=function(e){var t=e.user,s=e.token,r=e.posts,c=e.setPosts,a=e.setFeaturedPost,l=Object(n.useState)(""),p=Object(o.a)(l,2),d=p[0],O=p[1],h=Object(n.useState)(""),x=Object(o.a)(h,2),g=x[0],w=x[1],N=Object(n.useState)(""),S=Object(o.a)(N,2),y=S[0],P=S[1],C=Object(n.useState)(""),D=Object(o.a)(C,2),T=D[0],I=D[1],U=Object(n.useState)(""),L=Object(o.a)(U,2),_=L[0],F=L[1],E=Object(n.useState)("false"),M=Object(o.a)(E,2),B=M[0],A=M[1],V=Object(i.e)();Object(n.useEffect)((function(){Object(b.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(s);case 2:t=e.sent,c(t.data.posts);case 4:case"end":return e.stop()}}),e)})))()}),[]);var W=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f(s,T,g,_,y,B);case 3:n=e.sent,c([].concat(Object(k.a)(r),[n]));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,n){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),window.confirm("Are you sure")&&m(s,n),V.push("/posts/");case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{className:"titlePosts",children:"Posts"}),Object(u.jsx)("input",{className:"search",onChange:function(e){O(e.target.value)},type:"text",name:"Search Post",placeholder:"Search"}),t&&s&&Object(u.jsxs)("form",{onSubmit:W,children:[Object(u.jsx)("input",{className:"postValue",onChange:function(e){return P(e.target.value)},type:"text",name:"location",placeholder:"location",value:y}),Object(u.jsx)("input",{className:"postValue",onChange:function(e){return w(e.target.value)},type:"text",name:"description",placeholder:"description",value:g}),Object(u.jsx)("input",{className:"postValue",onChange:function(e){return I(e.target.value)},type:"text",name:"title",placeholder:"title",value:T}),Object(u.jsx)("input",{className:"postValue",onChange:function(e){return F(e.target.value)},type:"text",name:"price",placeholder:"price",value:_}),Object(u.jsxs)("select",{className:"postValue",onChange:function(e){return A(e.target.value)},type:"text",name:"WillDeliver",placeholder:"willDeliver",value:B,children:[Object(u.jsx)("option",{value:"true",children:"Yes"}),Object(u.jsx)("option",{value:"false",children:"No"})]}),Object(u.jsx)("button",{className:"submitPost",type:"submit",children:"Submit Post"})]}),Object(u.jsx)("div",{children:r.filter((function(e){return function(e){return"".concat(e.title," ").concat(e.location," ").concat(e.description," ").concat(e.author.username).toLowerCase().includes(d.toLowerCase())}(e)})).map((function(e){return Object(u.jsxs)("div",{className:"posts",onClick:function(n){!function(e,n){t&&s?(a(n),V.push("/posts/".concat(n._id))):alert("not logged in")}(0,e)},children:[Object(u.jsx)("h2",{children:e.title}),Object(u.jsxs)("div",{className:"postInfo",children:["Description: ",e.description]}),Object(u.jsxs)("div",{className:"postInfo",children:["Price: ",e.price]}),Object(u.jsxs)("div",{className:"postInfo",children:["Seller: ",e.author.username]}),Object(u.jsxs)("div",{className:"postInfo",children:["Location: ",e.location]}),Object(u.jsxs)("div",{className:"postInfo",children:["Will Deliver: ",e.willDeliver?"yes":"no"]}),e.isAuthor&&s&&Object(u.jsx)("button",{className:"delete",onClick:function(t){return G(t,e._id)},children:"Delete Post"})]},e._id)}))})]})},S=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),s=t[0],r=t[1],c=Object(n.useState)(""),j=Object(o.a)(c,2),b=j[0],p=j[1],d=Object(n.useState)(""),O=Object(o.a)(d,2),h=O[0],f=O[1],m=Object(n.useState)(!1),x=Object(o.a)(m,2),v=x[0],k=x[1],S=Object(n.useState)(!1),y=Object(o.a)(S,2),P=y[0],C=y[1],D=Object(n.useState)(""),T=Object(o.a)(D,2),I=T[0],U=T[1];return Object(u.jsxs)("main",{children:[Object(u.jsxs)("nav",{children:[Object(u.jsx)("h1",{className:"title",children:"Stranger's Things"}),Object(u.jsx)(a.b,{exact:!0,to:"/login",className:"navLink",activeClassName:"active",children:Object(u.jsx)("h2",{children:"Home"})}),Object(u.jsx)(a.b,{exact:!0,to:"/profile",className:"navLink",activeClassName:"active",children:Object(u.jsx)("h2",{children:"Profile"})}),Object(u.jsx)(a.b,{exact:!0,to:"/posts",className:"navLink",activeClassName:"active",children:Object(u.jsx)("h2",{children:"Posts"})})]}),Object(u.jsx)(i.a,{exact:!0,path:"/login",children:Object(u.jsx)(g,{posts:s,user:v,setUser:k,token:b,setToken:p,message:I,userData:P,setUserData:C})}),Object(u.jsx)(i.a,{path:"/profile",children:Object(u.jsx)(l,{user:v,setUser:k,token:b,setToken:p,userData:P,setUserData:C})}),Object(u.jsxs)(i.a,{path:"/posts",children:[Object(u.jsx)(i.a,{path:"/posts/:postId",children:v&&b&&Object(u.jsx)(w,{user:v,token:b,featuredPost:h,setFeaturedPost:f,message:I,setMessage:U})}),Object(u.jsx)(N,{user:v,token:b,featuredPost:h,setFeaturedPost:f,posts:s,setPosts:r})]})]})};s(33);c.a.render(Object(u.jsx)(a.a,{children:Object(u.jsx)(S,{})}),document.getElementById("app"))}},[[34,1,2]]]);
//# sourceMappingURL=main.e6e3e55d.chunk.js.map